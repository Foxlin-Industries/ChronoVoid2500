<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="ChronoVoid2500.Mobile.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ChronoVoid2500.Mobile.ViewModels"
             x:DataType="vm:LoginViewModel"
             Title="{Binding Title}">

    <!-- Modern Gradient Background -->
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#0a0a0a" Offset="0.0" />
            <GradientStop Color="#1a1a2e" Offset="0.5" />
            <GradientStop Color="#16213e" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <Grid>
        <!-- Animated Background Elements -->
        <Ellipse Fill="#ffffff" Opacity="0.1" WidthRequest="2" HeightRequest="2" 
                 HorizontalOptions="Start" VerticalOptions="Start" Margin="50,100" />
        <Ellipse Fill="#ffffff" Opacity="0.15" WidthRequest="1" HeightRequest="1" 
                 HorizontalOptions="End" VerticalOptions="Start" Margin="0,150,80,0" />
        <Ellipse Fill="#00ff88" Opacity="0.2" WidthRequest="3" HeightRequest="3" 
                 HorizontalOptions="Start" VerticalOptions="End" Margin="100,0,0,200" />
        <Ellipse Fill="#ffffff" Opacity="0.1" WidthRequest="1" HeightRequest="1" 
                 HorizontalOptions="End" VerticalOptions="End" Margin="0,0,50,100" />

        <!-- Main Content -->
        <ScrollView>
            <VerticalStackLayout Spacing="30" Padding="40,60" VerticalOptions="Center">
                
                <!-- Logo Section -->
                <VerticalStackLayout Spacing="10" Margin="0,0,0,40">
                    <Label Text="CHRONOVOID" 
                           FontSize="36" 
                           FontAttributes="Bold"
                           TextColor="#00ff88" 
                           HorizontalOptions="Center" />
                    
                    <Label Text="2500" 
                           FontSize="24" 
                           FontAttributes="Bold"
                           TextColor="White" 
                           HorizontalOptions="Center" />
                    
                    <Label Text="Enter the Void" 
                           FontSize="14" 
                           TextColor="#888888" 
                           HorizontalOptions="Center" />
                </VerticalStackLayout>

                <!-- Login Form Card -->
                <Frame BackgroundColor="#1a1a2e" 
                       BorderColor="#00ff88" 
                       CornerRadius="15" 
                       Padding="25"
                       HasShadow="True">
                    
                    <VerticalStackLayout Spacing="20">
                        
                        <!-- Mode Toggle -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            
                            <Button Grid.Column="0" 
                                    x:Name="LoginModeButton"
                                    Text="LOGIN"
                                    BackgroundColor="#00ff88"
                                    TextColor="Black"
                                    CornerRadius="10"
                                    FontAttributes="Bold" />
                            
                            <Button Grid.Column="1" 
                                    x:Name="RegisterModeButton"
                                    Text="REGISTER"
                                    BackgroundColor="#333333"
                                    TextColor="White"
                                    Command="{Binding ToggleRegistrationCommand}"
                                    CornerRadius="10"
                                    FontAttributes="Bold" />
                        </Grid>

                        <!-- Username Field -->
                        <Frame BackgroundColor="#0f0f23" BorderColor="#333333" CornerRadius="10" Padding="0">
                            <Entry x:Name="UsernameEntry"
                                   Placeholder="Username" 
                                   Text="{Binding Username}"
                                   BackgroundColor="Transparent"
                                   TextColor="White"
                                   PlaceholderColor="#666666"
                                   FontSize="16"
                                   Margin="15,10"
                                   ReturnType="Next" />
                        </Frame>

                        <!-- Email Field (Registration Only) -->
                        <Frame BackgroundColor="#0f0f23" 
                               BorderColor="#333333" 
                               CornerRadius="10" 
                               Padding="0"
                               IsVisible="{Binding IsRegistering}">
                            <Entry x:Name="EmailEntry"
                                   Placeholder="Email Address" 
                                   Text="{Binding Email}"
                                   BackgroundColor="Transparent"
                                   TextColor="White"
                                   PlaceholderColor="#666666"
                                   FontSize="16"
                                   Margin="15,10"
                                   Keyboard="Email"
                                   ReturnType="Next" />
                        </Frame>

                        <!-- Password Field with Show/Hide -->
                        <Frame BackgroundColor="#0f0f23" BorderColor="#333333" CornerRadius="10" Padding="0">
                            <Grid>
                                <Entry x:Name="PasswordEntry"
                                       Placeholder="Password" 
                                       Text="{Binding Password}"
                                       IsPassword="{Binding IsPasswordHidden}"
                                       BackgroundColor="Transparent"
                                       TextColor="White"
                                       PlaceholderColor="#666666"
                                       FontSize="16"
                                       Margin="15,10,50,10"
                                       ReturnType="Go" />
                                
                                <Button x:Name="TogglePasswordButton"
                                        Text="👁️"
                                        BackgroundColor="Transparent"
                                        TextColor="#00ff88"
                                        FontSize="18"
                                        HorizontalOptions="End"
                                        VerticalOptions="Center"
                                        Margin="0,0,10,0"
                                        Padding="5" />
                            </Grid>
                        </Frame>

                        <!-- Action Button -->
                        <Button x:Name="ActionButton"
                                Text="ENTER VOID"
                                BackgroundColor="#00ff88"
                                TextColor="Black"
                                FontAttributes="Bold"
                                FontSize="16"
                                CornerRadius="10"
                                HeightRequest="50"
                                Margin="0,10,0,0">
                            
                            <Button.Shadow>
                                <Shadow Brush="#00ff88" Opacity="0.3" Radius="10" Offset="0,2" />
                            </Button.Shadow>
                        </Button>

                    </VerticalStackLayout>
                </Frame>

                <!-- Error Message -->
                <Frame BackgroundColor="#ff3333" 
                       BorderColor="#ff6666" 
                       CornerRadius="10" 
                       Padding="15"
                       IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}">
                    <Label Text="{Binding ErrorMessage}" 
                           TextColor="White" 
                           HorizontalOptions="Center"
                           FontSize="14" />
                </Frame>

                <!-- Loading Indicator -->
                <Frame BackgroundColor="#1a1a2e" 
                       BorderColor="#00ff88" 
                       CornerRadius="10" 
                       Padding="20"
                       IsVisible="{Binding IsBusy}">
                    <HorizontalStackLayout Spacing="15" HorizontalOptions="Center">
                        <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                          Color="#00ff88" />
                        <Label Text="Connecting to the Void..." 
                               TextColor="#00ff88" 
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>